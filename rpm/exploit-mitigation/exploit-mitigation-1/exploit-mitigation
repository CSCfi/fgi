#!/bin/bash
#
#
# exploit-mitigation : startup script to execute exploit mitigations on FGI nodes
#                      
# Ulf Tigerstedt <ulf.tigerstedt@csc.fi>
### BEGIN INIT INFO
# Provides: exploit-mitigation
# Default-Start:  2345
# Default-Stop: 90
# Short-Description: mitigates exploits
# Description: mitigates exploits


. /etc/init.d/functions

if [ "$1" != "start" ]; then
   exit 0
fi

# debuginfo-install -y  kernel-`uname -r`

if [ -d /usr/share/systemtap/tapset/fgi/`uname -r` ]; then 
	for a in /usr/share/systemtap/tapset/fgi/`uname -r`/*.ko; do 
		/usr/bin/staprun -L $a
	done
fi


