# Kickstart file automatically generated by anaconda.                                                              

#version=RHEL6
install       
lang en_US.UTF-8
keyboard fi     
firewall --disbled
authconfig --enableshadow --passalgo=sha512 --enablefingerprint                                                               
selinux --disabled
timezone --utc Europe/Helsinki                                                                                                

services --enabled ntpd,rdma,nfs,ypbind,nscd

url --url http://pulse.fgi.csc.fi/6rolling/x86_64/os/
repo --name="Scientific Linux 6 - x86_64 - security updates"  --baseurl=http://pulse.fgi.csc.fi/6rolling/x86_64/updates/security/ 
repo --name="FGI" --baseurl=http://pulse.fgi.csc.fi/fgirepo6/
repo --name="EPEL" --baseurl=http://ftp.funet.fi/pub/Linux/mirrors/redhat/epel/6/x86_64/
repo --name=CVMFS_CERN --baseurl=http://cvmrepo.web.cern.ch/cvmrepo/yum/cvmfs/x86_64/

%post
#Disable yum autoupdate
sed -i /etc/sysconfig/yum-autoupdate -e 's/ENABLED="true"/ENABLED="false"/'

#fix resolving
grep search /etc/resolv.conf | sed -e "s/$/\ local\ ib\ ilo/" >/tmp/resolv.conf
grep nameserver etc/resolv.conf >> /tmp/resolv.conf
cp -f /tmp/resolv.conf /etc

#limit ssh access
echo 'AllowGroups root admins' >> /etc/ssh/sshd_config
%end

%packages
@base
@console-internet
@core
@debugging
@directory-client
@hardware-monitoring
@java-platform
@large-systems
@misc-sl
@nfs-file-server
@network-server
@network-file-system-client
@performance
@perl-runtime
@scalable-file-systems
@server-platform
@infiniband
pax
oddjob
sgpio
certmonger
pam_krb5
krb5-workstation
nscd
xauth
fgi-release6
epel-release
ypbind
%end
