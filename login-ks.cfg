# Kickstart file automatically generated by anaconda.                                                              

#version=RHEL6
install       
lang en_US.UTF-8
keyboard fi     
firewall --service=ssh                                                                                                        
authconfig --enableshadow --passalgo=sha512 --enablefingerprint                                                               
selinux --disabled
timezone --utc Europe/Helsinki                                                                                                

services --enabled ypbind,ntpd,squid,rdma

url --url http://pulse.fgi.csc.fi/6rolling/x86_64/os/
repo --name="Scientific Linux 6 - x86_64 - security updates"  --baseurl=http://pulse.fgi.csc.fi/6rolling/x86_64/updates/security/ 
repo --name="FGI" --baseurl=http://pulse.fgi.csc.fi/fgirepo6/
repo --name="EPEL" --baseurl=http://ftp.funet.fi/pub/Linux/mirrors/redhat/epel/6/x86_64/
repo --name=CVMFS_CERN --baseurl=http://cvmrepo.web.cern.ch/cvmrepo/yum/cvmfs/x86_64/

%post
echo "cache_dir ufs /var/spool/squid 10000 16 256" >> /etc/squid/squid.conf
grep search /etc/resolv.conf | sed -e "s/$/\ local\ ib\ ilo/" >/tmp/resolv.conf
grep nameserver etc/resolv.conf >> /tmp/resolv.conf
cp -f /tmp/resolv.conf /etc

sed -i /etc/sysctl.conf -e "s/net.ipv4.ip_forward\ =\ 0/net.ipv4.ip_forward\ =\ 1/"

%end

%packages
@base
@console-internet
@core
@debugging
@directory-client
@hardware-monitoring
@java-platform
@large-systems
@misc-sl
@nfs-file-server
@network-server
@network-file-system-client
@performance
@perl-runtime
@scalable-file-systems
@server-platform
@infiniband
pax
oddjob
sgpio
certmonger
pam_krb5
krb5-workstation
nscd
yp-tools
ypbind
tigervnc
cluster-profile
pdsh
pdsh-mod-machines
pdsh-rcmd-ssh
squid
xauth
fgi-release6
cvmfs-release
cvmfs-repofiles-fgi
epel-release
%end
